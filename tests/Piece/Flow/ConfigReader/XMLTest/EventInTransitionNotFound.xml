<?xml version="1.0" encoding="UTF-8"?>
<!-- $Id$ -->
<flow firstState="DisplayForm">
  <initial class="Piece_FlowTestCaseAction" method="initialize"/>
  <final class="Piece_FlowTestCaseAction" method="finalize"/>
  <lastState name="Finish" view="Finish">
    <entry class="Piece_FlowTestCaseAction" method="setupForm"/>
    <exit class="Piece_FlowTestCaseAction" method="teardownForm"/>
    <activity class="Piece_FlowTestCaseAction" method="countDisplay"/>
  </lastState>
  <viewState name="DisplayForm" view="Form">
    <entry class="Piece_FlowTestCaseAction" method="setupForm"/>
    <exit class="Piece_FlowTestCaseAction" method="teardownForm"/>
    <activity class="Piece_FlowTestCaseAction" method="countDisplay"/>
    <transition nextState="processSubmitDisplayForm">
      <action class="Piece_FlowTestCaseAction" method="validateInput"/>
      <guard class="Piece_FlowTestCaseAction" method="isPermitted"/>
    </transition>
  </viewState>
  <viewState name="ConfirmForm" view="Confirmation">
    <transition event="submit" nextState="processSubmitConfirmForm">
      <action class="Piece_FlowTestCaseAction" method="validateConfirmation"/>
    </transition>
  </viewState>
  <actionState name="processSubmitDisplayForm">
    <transition event="raiseError" nextState="DisplayForm"/>
    <transition event="succeed" nextState="ConfirmForm"/>
  </actionState>
  <actionState name="processSubmitConfirmForm">
    <transition event="raiseError" nextState="DisplayForm"/>
    <transition event="succeed" nextState="Register">
      <action class="Piece_FlowTestCaseAction" method="register"/>
    </transition>
  </actionState>
  <actionState name="Register">
    <transition event="raiseError" nextState="DisplayForm"/>
    <transition event="succeed" nextState="Finish"/>
  </actionState>
</flow>
