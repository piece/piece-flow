# $Id$
firstState: DisplayForm
lastState:
  name: Finish
  view: Finish
  entry:
    class: Piece_FlowTestCaseAction
    method: setupForm
  exit:
    class: Piece_FlowTestCaseAction
    method: teardownForm
  activity:
    class: Piece_FlowTestCaseAction
    method: countDisplay
viewState:
  - name: DisplayForm
    view: Form
    entry:
      class: Piece_FlowTestCaseAction
      method: setupForm
    exit:
      class: Piece_FlowTestCaseAction
      method: teardownForm
    activity:
      class: Piece_FlowTestCaseAction
      method: countDisplay
    transition:
      - event: submit
        nextState: processSubmitDisplayForm
        action:
          class: Piece_FlowTestCaseAction
          method: validateInput
        guard:
          class: Piece_FlowTestCaseAction
          method: isPermitted
  - name: ConfirmForm
    view: Confirmation
    transition:
      - event: submit
        nextState: processSubmitConfirmForm
        action:
          class: Piece_FlowTestCaseAction
          method: validateConfirmation
actionState:
  - name: processSubmitDisplayForm
    transition:
      - event: raiseError
        nextState: DisplayForm
      - event: succeed
        nextState: ConfirmForm
  - name: processSubmitConfirmForm
    transition:
      - event: raiseError
        nextState: DisplayForm
      - event: succeed
        nextState: Register
        action:
          class: Piece_FlowTestCaseAction
          method: register
  - name: Register
    transition:
      - event: raiseError
        nextState: DisplayForm
      - event: succeed
        nextState: Finish
initial:
  class: Piece_FlowTestCaseAction
  method: initialize
final:
  class: Piece_FlowTestCaseAction
  method: finalize
